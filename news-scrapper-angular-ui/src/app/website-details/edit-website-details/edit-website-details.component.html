<div *ngIf="id != 0">
  <h3>Edit website details with an id: {{ model.id }}</h3>

  <div class="errors" *ngIf="errors.length > 0">
    <ul *ngFor="let error of errors">
      <li class="error">{{ error }}</li>
    </ul>
  </div>

  <div class="row">
    <form #currentForm="ngForm" (submit)="onSubmit()">
      <input
        type="text"
        hidden
        name="websiteId"
        #websiteId="ngModel"
        [(ngModel)]="model.id"
      />

      <div class="form-group">
        <label for="url-id">Website Url</label>
        <input
          id="url-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="Website Url"
          name="url"
          #url="ngModel"
          [(ngModel)]="model.url"
          required
          minlength="1"
          [class.invalid]="url.invalid && url.touched"
        />
      </div>

      <div class="form-group">
        <label for="main-node-xpath-id">XPath to element containing news</label>
        <input
          id="main-node-xpath-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="Xpath"
          name="mainNodeXpath"
          #mainNodeXpath="ngModel"
          [(ngModel)]="model.mainNodeXPathToNewsContainer"
          required
          minlength="1"
          [class.invalid]="mainNodeXpath.invalid && mainNodeXpath.touched"
        />
      </div>

      <div class="form-group">
        <label for="news-node-tag-id">Tag for the news node</label>
        <input
          id="news-node-tag-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="News node tag"
          name="newsNodeTag"
          #newsNodeTag="ngModel"
          [(ngModel)]="model.newsNodeTag"
          required
          minlength="1"
          [class.invalid]="newsNodeTag.invalid && newsNodeTag.touched"
        />
      </div>

      <div class="form-group">
        <label for="news-node-class-id">Class for the news node</label>
        <input
          id="news-node-class-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="News node class"
          name="newsNodeClass"
          #newsNodeClass="ngModel"
          [(ngModel)]="model.newsNodeClass"
          minlength="1"
          [class.invalid]="newsNodeClass.invalid && newsNodeClass.touched"
        />
      </div>

      <div class="form-group">
        <label for="title-node-tag-id">Tag for the title node</label>
        <input
          id="title-node-tag-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="Title node tag"
          name="titleNodeTag"
          #titleNodeTag="ngModel"
          [(ngModel)]="model.titleNodeTag"
          required
          minlength="1"
          [class.invalid]="titleNodeTag.invalid && titleNodeTag.touched"
        />
      </div>

      <div class="form-group">
        <label for="title-node-class-id">Class for the title node</label>
        <input
          id="title-node-class-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="Title node class"
          name="titleNodeClass"
          #titleNodeClass="ngModel"
          [(ngModel)]="model.titleNodeClass"
          minlength="1"
          [class.invalid]="titleNodeClass.invalid && titleNodeClass.touched"
        />
      </div>

      <div class="form-group">
        <label for="description-node-tag-id"
          >Tag for the description node</label
        >
        <input
          id="description-node-tag-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="Description node tag"
          name="descriptionNodeTag"
          #descriptionNodeTag="ngModel"
          [(ngModel)]="model.descriptionNodeTag"
          minlength="1"
          [class.invalid]="
            descriptionNodeTag.invalid && descriptionNodeTag.touched
          "
        />
      </div>

      <div class="form-group">
        <label for="description-node-class-id"
          >Class for the description node</label
        >
        <input
          id="description-node-class-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="Description node class"
          name="descriptionNodeClass"
          #descriptionNodeClass="ngModel"
          [(ngModel)]="model.descriptionNodeClass"
          minlength="1"
          [class.invalid]="
            descriptionNodeClass.invalid && descriptionNodeClass.touched
          "
        />
      </div>

      <div class="form-group">
        <label for="img-node-class-id">Class for the image node</label>
        <input
          id="img-node-class-id"
          type="text"
          class="form-control form-control-lg"
          placeholder="Class for the img node"
          name="imgNodeClass"
          #imgNodeClass="ngModel"
          [(ngModel)]="model.imgNodeClass"
          minlength="1"
          [class.invalid]="imgNodeClass.invalid && imgNodeClass.touched"
        />
      </div>

      <div class="categories-card card">
        <div class="form-group">
          <label for="">Categories</label>
          <div class="categories-dropdown-container">
            <select
              name="test-name"
              [(ngModel)]="selectedCategory"
              class="form-control form-select"
            >
              <option></option>
              <option
                *ngFor="let item of availableCategories"
                [ngValue]="item"
                value="{{ item.id }}"
              >
                <!-- *ngIf="item.visible == true" -->
                {{ item.name }}
              </option>
            </select>
            <button
              type="button"
              class="btn btn-secondary col-md-2 categories-dropdown-button"
              (click)="onCategoryAdd()"
            >
              Add
            </button>
          </div>
        </div>
  
        <div class="form-group" *ngIf="chosenCategories.length > 0">
          <table class="table-secondary">
            <thead>
              <tr>
                <th>Id</th>
                <th>Name</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of chosenCategories">
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>
                  <button
                    class=""
                    (click)="onCategoryRemove(item.id)"
                    type="button"
                  >
                    remove
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
  

      <div class="form-group">
        <button
          class="btn btn-primary btn-block btn-lg"
          type="submit"
          [disabled]="currentForm.invalid"
        >
          Save website details
        </button>
        <a
          [routerLink]="['/website-details']"
          class="btn btn-secondary btn-block btn-lg"
        >
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>
